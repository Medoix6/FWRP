(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{7403:(e,s,a)=>{Promise.resolve().then(a.bind(a,6984))},6046:(e,s,a)=>{"use strict";var t=a(6658);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})},6984:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var t=a(5155),i=a(2115),r=a(6046),l=a(3312),n=a(3900),o=a(8986),d=a(6754),c=a(5055),u=a(7936),m=a(2472),x=a(3474),p=a(7493),f=a(7433),h=a(1354),g=a(1598),j=a(8173),b=a.n(j),v=a(9949),y=a(399);async function N(e){let s=await fetch("/api/donated-food/".concat(e));if(!s.ok)throw Error("Donation not found");return await s.json()}var w=a(7536);function k(){var e;let s=(0,r.useRouter)(),a=(0,r.useParams)(),j=null!==(e=null==a?void 0:a.id)&&void 0!==e?e:"",[k,D]=(0,i.useState)(!1),[I,F]=(0,i.useState)({title:"",description:"",location:"",expiryDate:"",pickupInstructions:""}),[C,A]=(0,i.useState)(null),[E,P]=(0,i.useState)(null),[R,S]=(0,i.useState)(!1),[J,T]=(0,i.useState)(!0),[q,z]=(0,i.useState)({fullName:"",email:"",avatar:""}),[_,L]=(0,i.useState)(!1);(0,i.useEffect)(()=>{L(!0)},[]),(0,i.useEffect)(()=>{if(!_)return;let e=async()=>{try{let e=await N(j);F({title:e.foodName||"",description:e.description||"",location:e.location||"",expiryDate:e.expiryDate||"",pickupInstructions:e.pickupInstructions||""}),A(e.imageUrl||"/placeholder.svg")}catch(e){console.error("Error loading donation:",e),s.push("/dashboard")}finally{T(!1)}};j&&e()},[j,s,_]),(0,i.useEffect)(()=>{if(!_)return;let e=(0,y.hg)(v.j,async e=>{if(e){let s=await (0,w.V)(e);z({fullName:s.fullName||s.displayName,email:s.email,avatar:s.avatar})}else window.location.href="/login"});return()=>e()},[_]);let U=e=>{let{name:s,value:a}=e.target;F(e=>({...e,[s]:a}))},$=async e=>{e.preventDefault(),S(!0);try{let e;let a={};if(E?((e=new FormData).append("title",I.title),e.append("description",I.description),e.append("location",I.location),e.append("expiryDate",I.expiryDate),e.append("pickupInstructions",I.pickupInstructions),e.append("foodImage",E)):(e=JSON.stringify({title:I.title,description:I.description,location:I.location,expiryDate:I.expiryDate,pickupInstructions:I.pickupInstructions}),a["Content-Type"]="application/json"),!(await fetch("/api/donated-food/".concat(j),{method:"PATCH",body:e,headers:a})).ok)throw Error("Failed to update donation");P(null),setTimeout(()=>s.push("/dashboard"),500)}catch(e){console.error("Error updating donation:",e)}finally{S(!1)}};return J?(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-600"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading donation..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100 flex",children:[(0,t.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,t.jsx)(l.$,{variant:"outline",size:"icon",onClick:()=>D(!k),className:"bg-white",children:(0,t.jsx)(u.A,{className:"h-5 w-5"})})}),(0,t.jsx)("div",{className:"\n        fixed inset-y-0 left-0 z-40 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out\n        ".concat(k?"translate-x-0":"-translate-x-full"," lg:translate-x-0\n      "),children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)("div",{className:"p-6 border-b",children:(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-600",children:"FWRP"})}),(0,t.jsxs)("div",{className:"flex-1 py-6 px-4 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,t.jsxs)(c.eu,{className:"h-20 w-20",children:[(0,t.jsx)(c.BK,{src:q.avatar||"/placeholder.svg?height=80&width=80",alt:"Profile"}),(0,t.jsx)(c.q5,{children:(0,t.jsx)(m.A,{className:"h-10 w-10"})})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"font-medium",children:q.fullName}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:q.email})]})]}),(0,t.jsxs)("nav",{className:"mt-8 space-y-2",children:[(0,t.jsxs)(b(),{href:"/edit-profile",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,t.jsx)(x.A,{className:"h-5 w-5 mr-3"}),"Edit Profile"]}),(0,t.jsxs)(b(),{href:"/dashboard",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,t.jsx)(p.A,{className:"h-5 w-5 mr-3"}),"Dashboard"]}),(0,t.jsxs)(b(),{href:"/donate-food",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,t.jsx)(f.A,{className:"h-5 w-5 mr-3"}),"Donate Food"]})]})]}),(0,t.jsx)("div",{className:"p-4 border-t",children:(0,t.jsx)(l.$,{variant:"outline",className:"w-full justify-start",asChild:!0,children:(0,t.jsxs)(b(),{href:"/login",children:[(0,t.jsx)(h.A,{className:"h-5 w-5 mr-3"}),"Sign out"]})})})]})}),(0,t.jsxs)("div",{className:"flex-1 lg:ml-64",children:[(0,t.jsx)("header",{className:"bg-white shadow",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center",children:[(0,t.jsx)(b(),{href:"/dashboard",className:"mr-4",children:(0,t.jsxs)(l.$,{variant:"ghost",size:"sm",children:[(0,t.jsx)(g.A,{className:"h-5 w-5 mr-2"}),"Back to Dashboard"]})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Food Donation"})]})}),(0,t.jsx)("main",{className:"max-w-3xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Update Your Food Donation"})}),(0,t.jsxs)("form",{onSubmit:$,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"title",children:"Food Title"}),(0,t.jsx)(n.p,{id:"title",name:"title",value:I.title,onChange:U,placeholder:"E.g., Fresh Vegetables, Homemade Bread",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"description",children:"Description"}),(0,t.jsx)(d.T,{id:"description",name:"description",value:I.description,onChange:U,placeholder:"Describe the food, quantity, and condition",rows:4,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"location",children:"Pickup Location"}),(0,t.jsx)(n.p,{id:"location",name:"location",value:I.location,onChange:U,placeholder:"Address or general area for pickup",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"expiryDate",children:"Expiry Date"}),(0,t.jsx)(n.p,{id:"expiryDate",name:"expiryDate",type:"date",value:I.expiryDate,onChange:U,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"pickupInstructions",children:"Pickup Instructions"}),(0,t.jsx)(d.T,{id:"pickupInstructions",name:"pickupInstructions",value:I.pickupInstructions,onChange:U,placeholder:"Any special instructions for pickup",rows:2})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"foodImage",children:"Food Image"}),(0,t.jsx)("div",{className:"mt-1 flex items-center",children:(0,t.jsxs)("label",{className:"block w-full",children:[(0,t.jsx)("span",{className:"sr-only",children:"Choose food image"}),(0,t.jsx)(n.p,{id:"foodImage",name:"foodImage",type:"file",accept:"image/*",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(a){P(a);let e=new FileReader;e.onloadend=()=>{A(e.result)},e.readAsDataURL(a)}},className:"block w-full text-sm text-gray-500   file:mr-4 file:py-2 file:px-4   file:rounded-md file:border-0   file:text-sm file:font-semibold   file:bg-green-50 file:text-green-700   hover:file:bg-green-100"})]})}),C&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Current Image:"}),(0,t.jsx)("div",{className:"relative w-full h-64 bg-gray-100 rounded-md overflow-hidden",children:(0,t.jsx)("img",{src:C||"/placeholder.svg",alt:"Food preview",className:"w-full h-full object-cover"})})]})]}),(0,t.jsxs)("div",{className:"pt-4 flex justify-end space-x-4",children:[(0,t.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>s.push("/dashboard"),children:"Cancel"}),(0,t.jsx)(l.$,{type:"submit",disabled:R,children:R?"Updating...":"Update Donation"})]})]})]})})]}),k&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>D(!1)})]})}},3900:(e,s,a)=>{"use strict";a.d(s,{p:()=>l});var t=a(5155),i=a(2115),r=a(1567);let l=i.forwardRef((e,s)=>{let{className:a,type:i,...l}=e;return(0,t.jsx)("input",{type:i,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});l.displayName="Input"},8986:(e,s,a)=>{"use strict";a.d(s,{J:()=>d});var t=a(5155),i=a(2115),r=a(6195),l=a(1027),n=a(1567);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(r.b,{ref:s,className:(0,n.cn)(o(),a),...i})});d.displayName=r.b.displayName},6754:(e,s,a)=>{"use strict";a.d(s,{T:()=>l});var t=a(5155),i=a(2115),r=a(1567);let l=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});l.displayName="Textarea"},6195:(e,s,a)=>{"use strict";a.d(s,{b:()=>n});var t=a(2115),i=a(3360),r=a(5155),l=t.forwardRef((e,s)=>(0,r.jsx)(i.sG.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var n=l},1598:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(4057).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[992,446,173,344,604,441,517,358],()=>s(7403)),_N_E=e.O()}]);