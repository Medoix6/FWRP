(()=>{var e={};e.id=26,e.ids=[26],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},73496:e=>{"use strict";e.exports=require("http2")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},54190:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(70260),a=s(28203),i=s(25155),n=s.n(i),o=s(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["edit-donation",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,78301)),"D:\\FWRP\\src\\app\\edit-donation\\[id]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,71354)),"D:\\FWRP\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,50042)),"D:\\FWRP\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\FWRP\\src\\app\\edit-donation\\[id]\\page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/edit-donation/[id]/page",pathname:"/edit-donation/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},49661:(e,t,s)=>{Promise.resolve().then(s.bind(s,78301))},44925:(e,t,s)=>{Promise.resolve().then(s.bind(s,87621))},79334:(e,t,s)=>{"use strict";var r=s(58686);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},87621:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(45512),a=s(58009),i=s(79334),n=s(39400),o=s(77722),l=s(17184),d=s(75002),c=s(65848),p=s(48320),u=s(42092),x=s(28790),m=s(85763),h=s(19725),f=s(35120),g=s(71894),v=s(28531),b=s.n(v);function j(){let e=(0,i.useRouter)(),t=(0,i.useParams)(),s=t?.id??"",[v,j]=(0,a.useState)(!1),[y,N]=(0,a.useState)({title:"",description:"",location:"",expiryDate:"",pickupInstructions:""}),[w,k]=(0,a.useState)(null),[P,D]=(0,a.useState)(null),[q,A]=(0,a.useState)(!1),[F,C]=(0,a.useState)(!0),[R,I]=(0,a.useState)({fullName:"",email:"",avatar:""}),[_,E]=(0,a.useState)(!1),M=e=>{let{name:t,value:s}=e.target;N(e=>({...e,[t]:s}))},S=async t=>{t.preventDefault(),A(!0);try{let t;let r={};if(P?((t=new FormData).append("title",y.title),t.append("description",y.description),t.append("location",y.location),t.append("expiryDate",y.expiryDate),t.append("pickupInstructions",y.pickupInstructions),t.append("foodImage",P)):(t=JSON.stringify({title:y.title,description:y.description,location:y.location,expiryDate:y.expiryDate,pickupInstructions:y.pickupInstructions}),r["Content-Type"]="application/json"),!(await fetch(`/api/donated-food/${s}`,{method:"PATCH",body:t,headers:r})).ok)throw Error("Failed to update donation");D(null),setTimeout(()=>e.push("/dashboard"),500)}catch(e){console.error("Error updating donation:",e)}finally{A(!1)}};return F?(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-600"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading donation..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 flex",children:[(0,r.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,r.jsx)(n.$,{variant:"outline",size:"icon",onClick:()=>j(!v),className:"bg-white",children:(0,r.jsx)(p.A,{className:"h-5 w-5"})})}),(0,r.jsx)("div",{className:`
        fixed inset-y-0 left-0 z-40 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out
        ${v?"translate-x-0":"-translate-x-full"} lg:translate-x-0
      `,children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-green-600",children:"FWRP"})}),(0,r.jsxs)("div",{className:"flex-1 py-6 px-4 space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsxs)(c.eu,{className:"h-20 w-20",children:[(0,r.jsx)(c.BK,{src:R.avatar||"/placeholder.svg?height=80&width=80",alt:"Profile"}),(0,r.jsx)(c.q5,{children:(0,r.jsx)(u.A,{className:"h-10 w-10"})})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"font-medium",children:R.fullName}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:R.email})]})]}),(0,r.jsxs)("nav",{className:"mt-8 space-y-2",children:[(0,r.jsxs)(b(),{href:"/edit-profile",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,r.jsx)(x.A,{className:"h-5 w-5 mr-3"}),"Edit Profile"]}),(0,r.jsxs)(b(),{href:"/dashboard",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,r.jsx)(m.A,{className:"h-5 w-5 mr-3"}),"Dashboard"]}),(0,r.jsxs)(b(),{href:"/donate-food",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,r.jsx)(h.A,{className:"h-5 w-5 mr-3"}),"Donate Food"]})]})]}),(0,r.jsx)("div",{className:"p-4 border-t",children:(0,r.jsx)(n.$,{variant:"outline",className:"w-full justify-start",asChild:!0,children:(0,r.jsxs)(b(),{href:"/login",children:[(0,r.jsx)(f.A,{className:"h-5 w-5 mr-3"}),"Sign out"]})})})]})}),(0,r.jsxs)("div",{className:"flex-1 lg:ml-64",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center",children:[(0,r.jsx)(b(),{href:"/dashboard",className:"mr-4",children:(0,r.jsxs)(n.$,{variant:"ghost",size:"sm",children:[(0,r.jsx)(g.A,{className:"h-5 w-5 mr-2"}),"Back to Dashboard"]})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Food Donation"})]})}),(0,r.jsx)("main",{className:"max-w-3xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Update Your Food Donation"})}),(0,r.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.J,{htmlFor:"title",children:"Food Title"}),(0,r.jsx)(o.p,{id:"title",name:"title",value:y.title,onChange:M,placeholder:"E.g., Fresh Vegetables, Homemade Bread",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.J,{htmlFor:"description",children:"Description"}),(0,r.jsx)(d.T,{id:"description",name:"description",value:y.description,onChange:M,placeholder:"Describe the food, quantity, and condition",rows:4,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.J,{htmlFor:"location",children:"Pickup Location"}),(0,r.jsx)(o.p,{id:"location",name:"location",value:y.location,onChange:M,placeholder:"Address or general area for pickup",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.J,{htmlFor:"expiryDate",children:"Expiry Date"}),(0,r.jsx)(o.p,{id:"expiryDate",name:"expiryDate",type:"date",value:y.expiryDate,onChange:M,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.J,{htmlFor:"pickupInstructions",children:"Pickup Instructions"}),(0,r.jsx)(d.T,{id:"pickupInstructions",name:"pickupInstructions",value:y.pickupInstructions,onChange:M,placeholder:"Any special instructions for pickup",rows:2})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.J,{htmlFor:"foodImage",children:"Food Image"}),(0,r.jsx)("div",{className:"mt-1 flex items-center",children:(0,r.jsxs)("label",{className:"block w-full",children:[(0,r.jsx)("span",{className:"sr-only",children:"Choose food image"}),(0,r.jsx)(o.p,{id:"foodImage",name:"foodImage",type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){D(t);let e=new FileReader;e.onloadend=()=>{k(e.result)},e.readAsDataURL(t)}},className:"block w-full text-sm text-gray-500   file:mr-4 file:py-2 file:px-4   file:rounded-md file:border-0   file:text-sm file:font-semibold   file:bg-green-50 file:text-green-700   hover:file:bg-green-100"})]})}),w&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Current Image:"}),(0,r.jsx)("div",{className:"relative w-full h-64 bg-gray-100 rounded-md overflow-hidden",children:(0,r.jsx)("img",{src:w||"/placeholder.svg",alt:"Food preview",className:"w-full h-full object-cover"})})]})]}),(0,r.jsxs)("div",{className:"pt-4 flex justify-end space-x-4",children:[(0,r.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>e.push("/dashboard"),children:"Cancel"}),(0,r.jsx)(n.$,{type:"submit",disabled:q,children:q?"Updating...":"Update Donation"})]})]})]})})]}),v&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>j(!1)})]})}s(94555),s(19),s(37924)},77722:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var r=s(45512),a=s(58009),i=s(44195);let n=a.forwardRef(({className:e,type:t,...s},a)=>(0,r.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));n.displayName="Input"},17184:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var r=s(45512),a=s(58009),i=s(30830),n=a.forwardRef((e,t)=>(0,r.jsx)(i.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var o=s(21643),l=s(44195);let d=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n,{ref:s,className:(0,l.cn)(d(),e),...t}));c.displayName=n.displayName},75002:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var r=s(45512),a=s(58009),i=s(44195);let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));n.displayName="Textarea"},37924:(e,t,s)=>{"use strict";s.d(t,{V:()=>i,w:()=>n});var r=s(94555),a=s(17656);async function i(e){let t=e.displayName?e.displayName:e.email?e.email.split("@")[0]:"No Username",s=e.email||"No Email",i=null,n="",o=await (0,a.x7)((0,a.H9)(r.db,"users",e.uid));if(o.exists()){let e=o.data();i=e.name||null,n=e.avatar||""}return{displayName:t,email:s,fullName:i,avatar:n}}async function n(){let e=await fetch("/api/donated-food");if(!e.ok)throw Error("Failed to fetch donated food");return await e.json()}},78301:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\FWRP\\\\src\\\\app\\\\edit-donation\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\FWRP\\src\\app\\edit-donation\\[id]\\page.tsx","default")},71894:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(94825).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},19725:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(94825).A)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},85763:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(94825).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,124,676,196],()=>s(54190));module.exports=r})();