(()=>{var e={};e.id=318,e.ids=[318],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9801:e=>{"use strict";e.exports=import("firebase-admin/app")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},64972:(e,r,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{patchFetch:()=>u,routeModule:()=>p,serverHooks:()=>l,workAsyncStorage:()=>E,workUnitAsyncStorage:()=>d});var n=t(42706),o=t(28203),a=t(45994),i=t(25207),c=e([i]);i=(c.then?(await c)():c)[0];let p=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/users/route",pathname:"/api/users",filename:"route",bundlePath:"app/api/users/route"},resolvedPagePath:"D:\\FWRP\\src\\app\\api\\users\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:E,workUnitAsyncStorage:d,serverHooks:l}=p;function u(){return(0,a.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:d})}s()}catch(e){s(e)}})},96487:()=>{},78335:()=>{},25207:(e,r,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{DELETE:()=>u,GET:()=>i,PATCH:()=>c});var n=t(39187),o=t(11784),a=e([o]);async function i(){let e=o.G.collection("users"),r=(await e.get()).docs.map(e=>({id:e.id,...e.data()}));return n.NextResponse.json(r)}async function c(e){try{let{id:r,...t}=await e.json();if(!r)return n.NextResponse.json({error:"User ID required"},{status:400});let s=o.G.collection("users").doc(r);return await s.update(t),n.NextResponse.json({success:!0})}catch(r){let e=r instanceof Error?r.message:String(r);return n.NextResponse.json({error:e},{status:500})}}async function u(e){try{let{id:r}=await e.json();if(!r)return n.NextResponse.json({error:"User ID required"},{status:400});let t=e.headers.get("authorization");if(!t||!t.startsWith("Bearer "))return n.NextResponse.json({error:"Unauthorized"},{status:401});let s=t.split("Bearer ")[1],a=await o.Q.verifyIdToken(s),i=await o.G.collection("users").doc(a.uid).get();if(!i.exists||!i.data()?.isAdmin)return n.NextResponse.json({error:"Forbidden"},{status:403});return await o.G.collection("users").doc(r).delete(),await o.Q.deleteUser(r),n.NextResponse.json({success:!0})}catch(e){return console.error("DELETE /api/users error:",e),n.NextResponse.json({error:e instanceof Error?e.message:String(e)},{status:500})}}o=(a.then?(await a)():a)[0],s()}catch(e){s(e)}})},11784:(e,r,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.d(r,{G:()=>u,Q:()=>c});var n=t(9801),o=t(14276),a=t(7879),i=e([n,o,a]);if([n,o,a]=i.then?(await i)():i,console.log("FIREBASE_PROJECT_ID:",!!process.env.FIREBASE_PROJECT_ID),console.log("FIREBASE_CLIENT_EMAIL:",!!process.env.FIREBASE_CLIENT_EMAIL),console.log("FIREBASE_PRIVATE_KEY exists:",!!process.env.FIREBASE_PRIVATE_KEY),!(0,n.getApps)().length){if(process.env.FIREBASE_PROJECT_ID&&process.env.FIREBASE_CLIENT_EMAIL&&process.env.FIREBASE_PRIVATE_KEY)(0,n.initializeApp)({credential:(0,n.cert)({projectId:process.env.FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:process.env.FIREBASE_PRIVATE_KEY.replace(/\\n/g,"\n")})});else throw Error("Missing Firebase Admin credentials in environment variables. Check FIREBASE_PROJECT_ID, FIREBASE_CLIENT_EMAIL, and FIREBASE_PRIVATE_KEY in your .env.local")}let c=(0,o.getAuth)(),u=(0,a.getFirestore)();s()}catch(e){s(e)}})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,71],()=>t(64972));module.exports=s})();