(()=>{var e={};e.id=105,e.ids=[105],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},73496:e=>{"use strict";e.exports=require("http2")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},62472:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=t(70260),a=t(28203),i=t(25155),l=t.n(i),n=t(67292),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,57154)),"D:\\FWRP\\src\\app\\dashboard\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,71354)),"D:\\FWRP\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,50042)),"D:\\FWRP\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\FWRP\\src\\app\\dashboard\\page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},1287:(e,s,t)=>{Promise.resolve().then(t.bind(t,57154))},31551:(e,s,t)=>{Promise.resolve().then(t.bind(t,35439))},35439:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(45512),a=t(65848),i=t(39400),l=t(58009),n=t(44195);let d=l.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));d.displayName="Card";let o=l.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));o.displayName="CardHeader";let c=l.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent";var x=t(48320),m=t(42092),u=t(28790),p=t(85763),h=t(19725),f=t(35120);let g=(0,t(94825).A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var j=t(28531),v=t.n(j),N=t(94555);function b(){let[e,s]=(0,l.useState)(!1),[t,n]=(0,l.useState)({displayName:null,email:null,avatar:null}),[j,b]=(0,l.useState)({fullName:"",email:"",avatar:""}),[y,w]=(0,l.useState)([]),[P,k]=(0,l.useState)({}),[q,A]=(0,l.useState)(!0);return q||!j.fullName?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,r.jsx)("div",{className:"text-center text-gray-500 text-lg",children:"Loading dashboard..."})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 flex",children:[(0,r.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,r.jsx)(i.$,{variant:"outline",size:"icon",onClick:()=>s(!e),className:"bg-white",children:(0,r.jsx)(x.A,{className:"h-5 w-5"})})}),(0,r.jsx)("div",{className:`
        fixed inset-y-0 left-0 z-40 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0
      `,children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-green-600",children:"FWRP"})}),(0,r.jsxs)("div",{className:"flex-1 py-6 px-4 space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsxs)(a.eu,{className:"h-20 w-20",children:[(0,r.jsx)(a.BK,{src:j.avatar||"/placeholder.svg?height=80&width=80",alt:"Profile"}),(0,r.jsx)(a.q5,{children:(0,r.jsx)(m.A,{className:"h-10 w-10"})})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"font-medium",children:j.fullName}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:j.email})]})]}),(0,r.jsxs)("nav",{className:"mt-8 space-y-2",children:[(0,r.jsxs)(v(),{href:"/edit-profile",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 mr-3"}),"Show Profile"]}),(0,r.jsxs)(v(),{href:"/dashboard",className:"flex items-center p-3 bg-gray-100 text-green-600 rounded-md",children:[(0,r.jsx)(p.A,{className:"h-5 w-5 mr-3"}),"Dashboard"]}),(0,r.jsxs)(v(),{href:"/donate-food",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,r.jsx)(h.A,{className:"h-5 w-5 mr-3"}),"Donate Food"]})]})]}),(0,r.jsx)("div",{className:"p-4 border-t",children:(0,r.jsxs)(i.$,{variant:"outline",className:"w-full justify-start",onClick:async()=>{try{await N.j.signOut(),window.location.href="/login"}catch{alert("Failed to sign out. Please try again.")}},children:[(0,r.jsx)(f.A,{className:"h-5 w-5 mr-3"}),"Sign out"]})})]})}),(0,r.jsxs)("div",{className:"flex-1 lg:ml-64",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"})})}),(0,r.jsx)("main",{className:"max-w-2xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"space-y-6",children:q?(0,r.jsx)("div",{className:"text-center text-gray-500",children:"Loading donated food..."}):0===y.length?(0,r.jsx)("div",{className:"text-center text-gray-500",children:"No food has been donated yet."}):y.map(e=>(0,r.jsxs)(d,{className:"overflow-hidden",children:[(0,r.jsxs)(o,{className:"p-4 flex items-center space-x-4",children:[(0,r.jsxs)(a.eu,{children:[(0,r.jsx)(a.BK,{src:e.avatar||"/placeholder.svg?height=80&width=80",alt:e.foodName||"Donator"}),(0,r.jsx)(a.q5,{children:e.foodName?e.foodName[0].toUpperCase():"?"})]}),(0,r.jsx)("span",{className:"font-semibold flex-1 text-center",children:e.foodName})]}),(0,r.jsxs)(c,{className:"p-0",children:[(0,r.jsx)("img",{src:e.imageUrl||"/placeholder.svg",alt:"Food",className:"w-full h-auto"}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:e.description}),e.userId&&P[e.userId]&&(0,r.jsxs)("div",{className:"text-sm text-gray-700 mb-2",children:[(0,r.jsx)("span",{className:"font-semibold text-green-700",children:"Phone:"})," ",P[e.userId]]}),(0,r.jsxs)("p",{className:"text-gray-500 text-sm mb-2",children:[(0,r.jsx)("span",{className:"font-semibold text-green-700",children:"Location:"})," ",e.location]}),(0,r.jsxs)("p",{className:"text-gray-500 text-sm mb-2",children:[(0,r.jsx)("span",{className:"font-semibold text-green-700",children:"Expiry:"})," ",e.expiryDate||"N/A"]}),(0,r.jsxs)("p",{className:"text-gray-500 text-sm mb-4",children:[(0,r.jsx)("span",{className:"font-semibold text-green-700",children:"Pickup:"})," ",e.pickupInstructions||"N/A"]}),(0,r.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,r.jsxs)("div",{className:"flex justify-center",children:[e.userId!==t?.email&&e.userId!==N.j.currentUser?.uid&&(0,r.jsxs)(i.$,{className:"w-full sm:w-auto",onClick:async()=>{let s=e.userId?P[e.userId]?.replace(/[^\d+]/g,""):"";if(!s){alert("No phone number available for this donor.");return}let t=`https://wa.me/${s}`;window.open(t,"_blank")},children:[(0,r.jsx)(g,{className:"h-5 w-5 mr-2"}),"Contact Donator"]}),e.userId===t?.email||e.userId===N.j.currentUser?.uid?(0,r.jsx)(i.$,{className:"w-full sm:w-auto ml-2 bg-blue-500 hover:bg-blue-600",onClick:()=>{window.location.href=`/edit-donation/${e.id}`},children:"Edit"}):null,e.userId===t?.email||e.userId===N.j.currentUser?.uid?(0,r.jsx)(i.$,{className:"w-full sm:w-auto ml-2 bg-red-500 hover:bg-red-600",onClick:async()=>{if(confirm("Are you sure you want to delete this donation?"))try{if(!(await fetch(`/api/donated-food?id=${e.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete");w(s=>s.filter(s=>s.id!==e.id))}catch{alert("Error deleting donation")}},children:"Delete"}):null]})})]})]})]},e.id))})})]}),e&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>s(!1)})]})}t(19),t(37924)},37924:(e,s,t)=>{"use strict";t.d(s,{V:()=>i,w:()=>l});var r=t(94555),a=t(17656);async function i(e){let s=e.displayName?e.displayName:e.email?e.email.split("@")[0]:"No Username",t=e.email||"No Email",i=null,l="",n=await (0,a.x7)((0,a.H9)(r.db,"users",e.uid));if(n.exists()){let e=n.data();i=e.name||null,l=e.avatar||""}return{displayName:s,email:t,fullName:i,avatar:l}}async function l(){let e=await fetch("/api/donated-food");if(!e.ok)throw Error("Failed to fetch donated food");return await e.json()}},57154:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\FWRP\\\\src\\\\app\\\\dashboard\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\FWRP\\src\\app\\dashboard\\page.tsx","default")},19725:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(94825).A)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},85763:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(94825).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,124,676,196],()=>t(62472));module.exports=r})();