(()=>{var e={};e.id=287,e.ids=[287],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},73496:e=>{"use strict";e.exports=require("http2")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},87030:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(70260),a=s(28203),i=s(25155),n=s.n(i),o=s(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["edit-profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,31756)),"D:\\FWRP\\src\\app\\edit-profile\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,71354)),"D:\\FWRP\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,50042)),"D:\\FWRP\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\FWRP\\src\\app\\edit-profile\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/edit-profile/page",pathname:"/edit-profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},26823:(e,t,s)=>{Promise.resolve().then(s.bind(s,31756))},66143:(e,t,s)=>{Promise.resolve().then(s.bind(s,28966))},79334:(e,t,s)=>{"use strict";var r=s(58686);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},28966:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ep});var r,a,i=s(45512),n=s(58009),o=s(79334),l=s(39400),d=s(77722),c=s(17184),u=s(75002),h=s(65848),p=s(48320),m=s(42092),f=s(28790),g=s(77042),x=s(85763),_=s(19725),b=s(35120),v=s(71894),w=s(28531),y=s.n(w),N=s(94555),R=s(19),A=s(17656),j=s(8682),C=s(42083),E=s(12846);let k="firebasestorage.googleapis.com";class T extends C.g{constructor(e,t,s=0){super(P(e),`Firebase Storage: ${t} (${P(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,T.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return P(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function P(e){return"storage/"+e}function U(){return new T(r.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function O(e){return new T(r.INVALID_ARGUMENT,e)}function I(){return new T(r.APP_DELETED,"The Firebase app was deleted.")}function D(e,t){return new T(r.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function S(e){throw new T(r.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(r||(r={}));class F{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=F.makeFromUrl(e,t)}catch(t){return new F(e,"")}if(""===s.path)return s;throw new T(r.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let s=null,a="([A-Za-z0-9.\\-_]+)",i=RegExp("^gs://"+a+"(/(.*))?$","i");function n(e){e.path_=decodeURIComponent(e.path)}let o=t.replace(/[.]/g,"\\."),l=RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${a}/o(/([^?#]*).*)?$`,"i"),d=t===k?"(?:storage.googleapis.com|storage.cloud.google.com)":t,c=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:l,indices:{bucket:1,path:3},postModify:n},{regex:RegExp(`^https?://${d}/${a}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:n}];for(let t=0;t<c.length;t++){let r=c[t],a=r.regex.exec(e);if(a){let e=a[r.indices.bucket],t=a[r.indices.path];t||(t=""),s=new F(e,t),r.postModify(s);break}}if(null==s)throw new T(r.INVALID_URL,"Invalid URL '"+e+"'.");return s}}class L{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function q(e){return"string"==typeof e||e instanceof String}function B(e){return M()&&e instanceof Blob}function M(){return"undefined"!=typeof Blob}function z(e,t,s,r){if(r<t)throw O(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>s)throw O(`Invalid value for '${e}'. Expected ${s} or less.`)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(a||(a={}));class ${constructor(e,t,s,r,a,i,n,o,l,d,c,u=!0,h=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=i,this.callback_=n,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=c,this.retry=u,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){let e=(e,t)=>{let s=this.resolve_,a=this.reject_,i=t.connection;if(t.wasSuccessCode)try{let e=this.callback_(i,i.getResponse());void 0!==e?s(e):s()}catch(e){a(e)}else if(null!==i){let e=U();e.serverResponse=i.getErrorText(),a(this.errorCallback_?this.errorCallback_(i,e):e)}else a(t.canceled?this.appDelete_?I():new T(r.CANCELED,"User canceled the upload/download."):new T(r.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?e(!1,new V(!1,null,!0)):this.backoffId_=function(e,t,s){let r=1,a=null,i=null,n=!1,o=0,l=!1;function d(...e){l||(l=!0,t.apply(null,e))}function c(t){a=setTimeout(()=>{a=null,e(h,2===o)},t)}function u(){i&&clearTimeout(i)}function h(e,...t){let s;if(l){u();return}if(e||2===o||n){u(),d.call(null,e,...t);return}r<64&&(r*=2),1===o?(o=2,s=0):s=(r+Math.random())*1e3,c(s)}let p=!1;function m(e){!p&&(p=!0,u(),!l&&(null!==a?(e||(o=2),clearTimeout(a),c(0)):e||(o=1)))}return c(0),i=setTimeout(()=>{n=!0,m(!0)},s),m}((e,t)=>{if(t){e(!1,new V(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let r=e=>{let t=e.loaded,s=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,s)};null!==this.progressCallback_&&s.addUploadProgressListener(r),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(r),this.pendingConnection_=null;let t=s.getErrorCode()===a.NO_ERROR,i=s.getStatus();if(!t||function(e,t){let s=e>=500&&e<600,r=-1!==[408,429].indexOf(e),a=-1!==t.indexOf(e);return s||r||a}(i,this.additionalRetryCodes_)&&this.retry){e(!1,new V(!1,null,s.getErrorCode()===a.ABORT));return}e(!0,new V(-1!==this.successCodes_.indexOf(i),s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class V{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function W(...e){let t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){let s=new t;for(let t=0;t<e.length;t++)s.append(e[t]);return s.getBlob()}if(M())return new Blob(e);throw new T(r.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}let H={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class K{constructor(e,t){this.data=e,this.contentType=t||null}}function G(e){let t=[];for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):(64512&r)==55296?s<e.length-1&&(64512&e.charCodeAt(s+1))==56320?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++s),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):(64512&r)==56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function J(e,t){let s;switch(e){case H.BASE64:{let s=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(s||r)throw D(e,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case H.BASE64URL:{let s=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(s||r)throw D(e,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}}try{s=function(e){if(/[^-A-Za-z0-9+/=]/.test(e))throw D("base64","Invalid character found");return Buffer.from(e,"base64").toString("binary")}(t)}catch(t){if(t.message.includes("polyfill"))throw t;throw D(e,"Invalid character found")}let r=new Uint8Array(s.length);for(let e=0;e<s.length;e++)r[e]=s.charCodeAt(e);return r}class Z{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(null===t)throw D(H.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let s=t[1]||null;null!=s&&(this.base64=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}class X{constructor(e,t){let s=0,r="";B(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(!B(this.data_))return new X(new Uint8Array(this.data_.buffer,e,t-e),!0);{var s;let r=(s=this.data_).webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null;return null===r?null:new X(r)}}static getBlob(...e){if(M()){let t=e.map(e=>e instanceof X?e.data_:e);return new X(W.apply(null,t))}{let t=e.map(e=>q(e)?function(e,t){switch(e){case H.RAW:return new K(G(t));case H.BASE64:case H.BASE64URL:return new K(J(e,t));case H.DATA_URL:return new K(function(e){let t=new Z(e);return t.base64?J(H.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(e){throw D(H.DATA_URL,"Malformed data URL.")}return G(t)}(t.rest)}(t),new Z(t).contentType)}throw U()}(H.RAW,e).data:e.data_),s=0;t.forEach(e=>{s+=e.byteLength});let r=new Uint8Array(s),a=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)r[a++]=e[t]}),new X(r,!0)}}uploadData(){return this.data_}}function Y(e){let t=e.lastIndexOf("/",e.length-2);return -1===t?e:e.slice(t+1)}function Q(e,t){return t}class ee{constructor(e,t,s,r){this.server=e,this.local=t||e,this.writable=!!s,this.xform=r||Q}}let et=null;class es{constructor(e,t,s,r){this.url=e,this.method=t,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function er(e){if(!e)throw U()}function ea(e){return function(t,s){var a,i;let n;return 401===t.getStatus()?n=t.getErrorText().includes("Firebase App Check token is invalid")?new T(r.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new T(r.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,n=new T(r.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,n=new T(r.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):n=s,n.status=t.getStatus(),n.serverResponse=s.serverResponse,n}}let ei={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};class en{constructor(){this.errorText_="",this.sent_=!1,this.errorCode_=a.NO_ERROR}async send(e,t,s,r,i){if(this.sent_)throw S("cannot .send() more than once");this.sent_=!0;try{let n=await el(e,t,s,i,r);this.headers_=n.headers,this.statusCode_=n.status,this.errorCode_=a.NO_ERROR,this.body_=await n.arrayBuffer()}catch(e){this.errorText_=null==e?void 0:e.message,this.statusCode_=0,this.errorCode_=a.NETWORK_ERROR}}getErrorCode(){if(void 0===this.errorCode_)throw S("cannot .getErrorCode() before receiving response");return this.errorCode_}getStatus(){if(void 0===this.statusCode_)throw S("cannot .getStatus() before receiving response");return this.statusCode_}getErrorText(){return this.errorText_}abort(){}getResponseHeader(e){if(!this.headers_)throw S("cannot .getResponseHeader() before receiving response");return this.headers_.get(e)}addUploadProgressListener(e){}removeUploadProgressListener(e){}}class eo extends null{getResponse(){if(!this.body_)throw S("cannot .getResponse() before receiving response");return Buffer.from(this.body_).toString("utf-8")}}function el(e,t,s,r,a){let i={method:t,headers:r||{},body:a};return(0,C.zJ)(e)&&s&&(i.credentials="include"),fetch(e,i)}class ed{constructor(e,t){this._service=e,t instanceof F?this._location=t:this._location=F.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ed(e,t)}get root(){let e=new F(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Y(this._location.path)}get storage(){return this._service}get parent(){let e=function(e){if(0===e.length)return null;let t=e.lastIndexOf("/");return -1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;let t=new F(this._location.bucket,e);return new ed(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw new T(r.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}}function ec(e,t){let s=null==t?void 0:t.storageBucket;return null==s?null:F.makeFromBucketSpec(s,e)}class eu{constructor(e,t,s,r,a,i=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=r,this._firebaseVersion=a,this._isUsingEmulator=i,this._bucket=null,this._host=k,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=r?this._bucket=F.makeFromBucketSpec(r,this._host):this._bucket=ec(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=F.makeFromBucketSpec(this._url,e):this._bucket=ec(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){z("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){z("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,j.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ed(this,e)}_makeRequest(e,t,s,r,a=!0){if(this._deleted)return new L(I());{let i=function(e,t,s,r,a,i,n=!0,o=!1){let l=function(e){let t=encodeURIComponent,s="?";for(let r in e)e.hasOwnProperty(r)&&(s=s+(t(r)+"=")+t(e[r])+"&");return s.slice(0,-1)}(e.urlParams),d=e.url+l,c=Object.assign({},e.headers);return t&&(c["X-Firebase-GMPID"]=t),null!==s&&s.length>0&&(c.Authorization="Firebase "+s),c["X-Firebase-Storage-Version"]="webjs/"+(null!=i?i:"AppManager"),null!==r&&(c["X-Firebase-AppCheck"]=r),new $(d,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,n,o)}(e,this._appId,s,r,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){let[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,r).getPromise()}}async function eh(e,t){await (0,A.mZ)((0,A.H9)(N.db,"users",e),t)}function ep(){let e=(0,o.useRouter)(),[t,s]=(0,n.useState)(!1),[r,a]=(0,n.useState)({displayName:null,email:null}),[w,A]=(0,n.useState)(!1),[j,C]=(0,n.useState)(null),[E,k]=(0,n.useState)(!1),[T]=(0,n.useState)(!0),[P,U]=(0,n.useState)(!1),[O,I]=(0,n.useState)(null),[D,S]=(0,n.useState)({fullName:"",email:"",phone:"",address:"",city:"",state:"",postalCode:"",bio:"",avatar:""}),[F,L]=(0,n.useState)(!1),[q,B]=(0,n.useState)(null),M=e=>{let{name:t,value:s}=e.target;S(e=>({...e,[t]:s}))},z=async()=>{S(e=>({...e,avatar:""}));try{let e=N.j.currentUser;if(!e)throw Error("No authenticated user");await eh(e.uid,{avatar:""}),B(null)}catch{B("Failed to reset avatar in database.")}},$=async t=>{if(!w){t.preventDefault(),A(!0);return}t.preventDefault(),L(!0),B(null);try{let t=N.j.currentUser;if(!t)throw Error("No authenticated user");let s=D.avatar;await eh(t.uid,{name:D.fullName,email:D.email,phone:D.phone,address:D.address,city:D.city,state:D.state,postalCode:D.postalCode,bio:D.bio,avatar:s}),S(e=>({...e,avatar:s})),A(!1),j?e.push("/admin"):e.push("/dashboard")}catch(e){console.error("Error updating profile:",e),B(e?.message||"Failed to update profile. Please try again.")}finally{L(!1)}},[V,W]=(0,n.useState)(!1),[H,K]=(0,n.useState)(""),[G,J]=(0,n.useState)(""),[Z,X]=(0,n.useState)(null),[Y,Q]=(0,n.useState)(null),[ee,et]=(0,n.useState)(!1),es=e=>/^(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{6,}$/.test(e),er=async e=>{if(e.preventDefault(),X(null),Q(null),et(!0),!es(G)){X("Password must be at least 6 characters, include 1 capital letter and 1 number."),et(!1);return}try{let e=N.j.currentUser;if(!e||!e.email)throw Error("No authenticated user");let t=R.IX.credential(e.email,H);await (0,R.kZ)(e,t),await (0,R.f3)(e,G),Q("Password updated successfully."),W(!1),K(""),J("")}catch(e){if("object"==typeof e&&null!==e&&("code"in e||"message"in e)){let t=e.code,s=e.message;"auth/invalid-credential"===t||"string"==typeof s&&s.includes("auth/invalid-credential")?X("The current password you entered is incorrect."):X(s||"Failed to update password.")}else X("Failed to update password.")}finally{et(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-100 flex",children:[(0,i.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,i.jsx)(l.$,{variant:"outline",size:"icon",onClick:()=>s(!t),className:"bg-white",children:(0,i.jsx)(p.A,{className:"h-5 w-5"})})}),(0,i.jsx)("div",{className:`
        fixed inset-y-0 left-0 z-40 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out
        ${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0
      `,children:(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[(0,i.jsx)("div",{className:"p-6 border-b",children:(0,i.jsx)("h2",{className:"text-2xl font-bold text-green-600",children:"FWRP"})}),(0,i.jsxs)("div",{className:"flex-1 py-6 px-4 space-y-6",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,i.jsxs)(h.eu,{className:"w-24 h-24 mb-2",children:[(0,i.jsx)(h.BK,{src:D.avatar||"/placeholder.svg?height=80&width=80",alt:"Profile"}),(0,i.jsx)(h.q5,{children:(0,i.jsx)(m.A,{className:"h-10 w-10"})})]}),(0,i.jsx)("span",{className:"text-lg font-semibold",children:D.fullName||r.displayName})]}),(0,i.jsx)("nav",{className:"mt-8 space-y-2",children:null===j?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(y(),{href:"/edit-profile",className:"flex items-center p-3 bg-gray-100 text-green-600 rounded-md",children:[(0,i.jsx)(f.A,{className:"h-5 w-5 mr-3"}),"Show Profile"]}),j?(0,i.jsxs)(y(),{href:"/admin",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,i.jsx)(g.A,{className:"h-5 w-5 mr-3"}),"Admin Dashboard"]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(y(),{href:"/dashboard",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,i.jsx)(x.A,{className:"h-5 w-5 mr-3"}),"Dashboard"]}),(0,i.jsxs)(y(),{href:"/donate-food",className:"flex items-center p-3 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,i.jsx)(_.A,{className:"h-5 w-5 mr-3"}),"Donate Food"]})]})]})})]}),(0,i.jsx)("div",{className:"p-4 border-t",children:(0,i.jsxs)(l.$,{variant:"outline",className:"w-full justify-start",onClick:async()=>{try{await N.j.signOut(),e.push("/login")}catch{B("Failed to sign out. Please try again.")}},children:[(0,i.jsx)(b.A,{className:"h-5 w-5 mr-3"}),"Sign out"]})})]})}),(0,i.jsxs)("div",{className:"flex-1 lg:ml-64",children:[(0,i.jsx)("header",{className:"bg-white shadow",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center",children:[(0,i.jsx)(y(),{href:"/dashboard",className:"mr-4",children:(0,i.jsxs)(l.$,{variant:"ghost",size:"sm",children:[(0,i.jsx)(v.A,{className:"h-5 w-5 mr-2"}),"Back to Dashboard"]})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Show Profile"})]})}),(0,i.jsx)("main",{className:"max-w-3xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Personal Information"}),(0,i.jsxs)("form",{onSubmit:$,className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"avatar",children:"Profile Picture"}),(0,i.jsxs)("div",{className:"mt-1 flex items-center space-x-5",children:[(0,i.jsxs)(h.eu,{className:"h-20 w-20",children:[(0,i.jsx)(h.BK,{src:D.avatar||"/placeholder.svg?height=80&width=80",alt:"Profile"}),(0,i.jsx)(h.q5,{children:(0,i.jsx)(m.A,{className:"h-10 w-10"})})]}),w&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.$,{type:"button",onClick:()=>{B("Cloudinary widget failed to load. Please try again later.")},className:"ml-4 bg-blue-600 text-white",disabled:!T||P,title:T?"Upload Avatar":"Cloudinary widget is not ready yet",children:P?(0,i.jsxs)("span",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"animate-spin mr-2 h-4 w-4 border-b-2 border-white rounded-full"}),"Uploading..."]}):"Upload Avatar"}),(0,i.jsx)(l.$,{type:"button",onClick:z,className:"ml-2 bg-gray-200 text-gray-800",disabled:P,children:"Reset Avatar"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"fullName",children:"Full Name"}),(0,i.jsx)(d.p,{id:"fullName",name:"fullName",value:D.fullName,onChange:M,required:!0,readOnly:!w})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"email",children:"Email Address"}),(0,i.jsx)(d.p,{id:"email",name:"email",type:"email",value:D.email,onChange:M,required:!0,readOnly:!w})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"phone",children:"Phone Number"}),(0,i.jsx)(d.p,{id:"phone",name:"phone",value:D.phone,onChange:M,required:!0,readOnly:!w})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"address",children:"Address"}),(0,i.jsx)(d.p,{id:"address",name:"address",value:D.address,onChange:M,required:!0,readOnly:!w})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"city",children:"City"}),(0,i.jsx)(d.p,{id:"city",name:"city",value:D.city,onChange:M,required:!0,readOnly:!w})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"state",children:"State/Province"}),(0,i.jsx)(d.p,{id:"state",name:"state",value:D.state,onChange:M,required:!0,readOnly:!w})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"postalCode",children:"Postal Code"}),(0,i.jsx)(d.p,{id:"postalCode",name:"postalCode",value:D.postalCode,onChange:M,required:!0,readOnly:!w})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"bio",children:"Bio"}),(0,i.jsx)(u.T,{id:"bio",name:"bio",value:D.bio,onChange:M,placeholder:"Tell us a bit about yourself",rows:4,readOnly:!w})]}),q&&(0,i.jsx)("div",{className:"mb-4 text-red-600 font-semibold",children:q}),O&&(0,i.jsx)("div",{className:"mb-4 text-green-600 font-semibold",children:O}),(0,i.jsxs)("div",{className:"pt-4 flex flex-col gap-2",children:[(0,i.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>W(e=>!e),children:V?"Cancel Password Change":"Change Password"}),V&&(0,i.jsxs)("div",{className:"space-y-4 mt-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"currentPassword",children:"Current Password"}),(0,i.jsx)(d.p,{id:"currentPassword",name:"currentPassword",type:"password",value:H,onChange:e=>K(e.target.value),required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.J,{htmlFor:"newPassword",children:"New Password"}),(0,i.jsx)(d.p,{id:"newPassword",name:"newPassword",type:"password",value:G,onChange:e=>J(e.target.value),required:!0,minLength:6})]}),Z&&(0,i.jsx)("div",{className:"text-red-600",children:Z}),Y&&(0,i.jsx)("div",{className:"text-green-600",children:Y}),(0,i.jsx)(l.$,{onClick:er,disabled:ee,type:"button",children:ee?"Updating...":"Update Password"})]})]}),(0,i.jsxs)("div",{className:"pt-4 flex justify-end space-x-4",children:[w&&(0,i.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,i.jsx)(l.$,{type:"submit",disabled:F,children:F?"Saving...":w?"Save Changes":"Edit"}),(0,i.jsx)(l.$,{type:"button",variant:"destructive",className:"ml-2 bg-red-600 text-white hover:bg-red-700",onClick:async()=>{if(window.confirm("Are you sure you want to delete your account? This action cannot be undone.")){L(!0),B(null);try{let t=N.j.currentUser;if(!t)throw Error("No authenticated user");await (0,R.hG)(t),e.push("/signup")}catch(e){B(e?.message||"Failed to delete account. Please try again.")}finally{L(!1)}}},disabled:F,children:"Delete Account"})]})]})]})})]}),t&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>s(!1)}),E&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md flex flex-col items-center",children:[(0,i.jsx)("span",{className:"mb-4 text-lg font-semibold",children:"Uploading Avatar..."}),(0,i.jsx)(l.$,{onClick:()=>k(!1),variant:"outline",children:"Cancel"})]})})]})}(0,j.om)(new E.uA("storage",function(e,{instanceIdentifier:t}){return new eu(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t,j.MF)},"PUBLIC").setMultipleInstances(!0)),(0,j.KO)("@firebase/storage","0.13.10")},77722:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var r=s(45512),a=s(58009),i=s(44195);let n=a.forwardRef(({className:e,type:t,...s},a)=>(0,r.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));n.displayName="Input"},17184:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var r=s(45512),a=s(58009),i=s(30830),n=a.forwardRef((e,t)=>(0,r.jsx)(i.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var o=s(21643),l=s(44195);let d=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n,{ref:s,className:(0,l.cn)(d(),e),...t}));c.displayName=n.displayName},75002:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var r=s(45512),a=s(58009),i=s(44195);let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));n.displayName="Textarea"},31756:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\FWRP\\\\src\\\\app\\\\edit-profile\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\FWRP\\src\\app\\edit-profile\\page.tsx","default")},71894:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(94825).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},19725:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(94825).A)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},85763:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(94825).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},77042:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(94825).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,124,676,196],()=>s(87030));module.exports=r})();